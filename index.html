<!DOCTYPE html>
<html>

<head>
	<title>Getting Clients IP</title>
	<style>
	p, h1 {
		color: green;
	}
	</style>

	<script src=
"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
	</script>
	
	<script>
	
	$.getJSON("https://api.ipify.org?format=json", function(data) {
		
		$("#gfg").html(data.ip);
        // console.log(data.ip);
        const IP = data.ip;
        // const ipapi = `https://ipapi.co/${IP}/json/ `;
        
        fetchIPInformation(IP);

	})

      // Define the IP address you want to look up

// Function to fetch information about the IP address
function fetchIPInformation(ipAddress) {
    const apiUrl = `https://ipapi.co/${ipAddress}/json/`;

    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            // Display the IP information
            console.log(data);
            // mapApply(data)
            pinCode(data)
        })
        .catch(error => {
            console.error("Error fetching IP information:", error);
        });

}

// Call the function to fetch IP information
 const pinCode = (data) => {
//     const pin = `https://api.postalpincode.in/pincode/${data.postal} - where ${data.postal}`
//    console.log(pin);
 

const apiUrl = `https://api.postalpincode.in/pincode/${data.postal}`;

fetch(apiUrl)
        .then(response => response.json())
        .then(pinCode => {
            console.log(pinCode[0].PostOffice);
            
        })
        .catch(error => {
            console.error("Error fetching IP information:", error);
        });
 }

 const postOffice = () => {
    
 }






















//     const mapApply = (data) => {
//         const mapimg = document.querySelector("#map")
//       mapimg.innerHTML = `<iframe src="https://maps.google.com/maps?q=${data.latitude}, ${data.longitude}&z=15&output=embed" width="360" height="270" frameborder="0" style="border:0"></iframe>`
    
//     // datetime in "America/Chicago" timezone in the "en-US" locale
//      let chicago_datetime_str = new Date().toLocaleString("en-US", { timeZone: `${data.timezone}` });

// // "3/22/2021, 5:05:51 PM"
//         console.log(chicago_datetime_str);
  
// // create new Date object
// let date_chicago = new Date(chicago_datetime_str);

// // year as (YYYY) format
// let year = date_chicago.getFullYear();

// // month as (MM) format
// let month = ("0" + (date_chicago.getMonth() + 1)).slice(-2);

// // date as (DD) format
// let date = ("0" + date_chicago.getDate()).slice(-2);

// // date time in YYYY-MM-DD format
// let date_time = year + "-" + month + "-" + date;

// // "2021-03-22"
// console.log(date_time);
//     }
	</script>
</head>

<body>
	<center>
		<h1>GeeksforGeeks</h1>
		<h3>Public IP Address of user is:</h3>
		<p id="gfg"></p>
        <div id="map"></div>
	</center>
</body>

</html>
